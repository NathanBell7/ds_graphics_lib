# Simple DS Graphics Library

This is a guide to using the small, simple graphics wrapper library I have made for the Nintendo DS using libnds. All of the code is open source so someone who is interested in the inner workings can hopefully gain some understanding of how it works if they so desire.

## Pre-requisites:

- C++ compiler on your system (required)
- Devkitpro set up on your system (required) - https://devkitpro.org/wiki/Getting_Started
- Knowledge of Object Oriented Programming (recommended)
- Knowledge of C++ (recommended)

## Setting up another project with this library

- Create a folder called gfx (If you don't have one)
- Create a folder called include (If you don't have one)
- Set GRAPHICS in the makefile to be equal to gfx (`GRAPHICS := gfx`)
- Make sure `INCLUDES := include` in the makefile
- Place the sprites.cpp file into the source folder
- Place the sprites.hpp file into the include folder

You can also just use this project and modify it as you wish as a baseline, as it is based off the arm9 template from devkitpro.

## Turn images into code using Grit

### Create an image

- Use GIMP to create an image that you want to display to the screen (you can use others but I used GIMP so it will be easiest to follow that way).
- The image size must be a multiple of 8x8 pixels, so it could be 16x16 or 32x32 up to 64x64.
- The image must be in indexed mode (click image on the toolbar, then mode, then indexed) with the maximum number of colours set to 16 (as this is the maximum number of colours allowed per sprite with this library).
- A helpful tool in gimp is the colourmap, you can click the little arrow at the top right and add the colourmap panel to show all the colours you have used.
- The first colour in the colourmap will be recognised as an "invisible colour" and will not be rendered by the DS.
- When you are finished with an image, then you can export it to the gfx folder as a .png
- You should then make a new file in that folder with the same name as the exported .png but with the .grit extension e.g. if your image is head.png, make a file called head.grit.
- In that file, write `-gB4`, then on a new line write `-gt`.
- In your code, at the top of the file you will be using the image in, type `#include "your_image_name.h"`
- Your image is ready to be used in you application :)

## General use of the library

**Only follow this section if you have set up an image from the previous section!**

The general structure of sprites via this library is this:

- You create a sprite.
- You add that sprite's colour palette as one of the 16 available colour palettes per screen via the gritted image.
- You set that sprite to use that colour palette.
- You then set that sprite's image (tiles) to the tiles generated by grit for the image.
- You can then update the screen to show the sprite.

For a precise implementation, please follow the commented example in main.cpp.

The reason for such limited palettes is because of the low memory size in the DS, so you cannot have many palettes. Hence, the reason you can declare palettes seperate from sprites is so you can share them between different sprites, e.g. In a game of snake all of the body pieces will be different sprites but share the same palette.

If you have any more questions on why this works, please follow these links:

- Tiled Sprites - https://dspassme.jzdocs.com/programmers_guide/tutorial/using_tiles.html
- Grit - https://www.coranac.com/man/grit/html/grit.htm
